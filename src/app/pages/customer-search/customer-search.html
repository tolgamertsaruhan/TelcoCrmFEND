<div class="flex h-screen bg-gray-100 p-4 font-inter">
  <!-- Sol Menü (Görseldeki tasarımı taklit ediyoruz) -->
  <div class="w-20 bg-gray-800 p-2 rounded-l-xl flex flex-col items-center justify-start text-white shadow-xl">
    <!-- İkonlar -->
    <div class="flex flex-col space-y-4 w-full mt-4">
      <!-- B2C (Aktif) -->
      <div class="p-2 flex flex-col items-center cursor-pointer bg-orange-600 rounded-lg shadow-lg">
        <!-- User Group Icon (Lucide/SVG) -->
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        <span class="text-xs mt-1">B2C</span>
      </div>
      <!-- B2B (Pasif) -->
      <div class="p-2 flex flex-col items-center cursor-pointer text-gray-400 hover:bg-gray-700 rounded-lg">
        <!-- Briefcase Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
        <span class="text-xs mt-1">B2B</span>
      </div>
      <!-- Diğer Menü İkonları -->
      <div class="p-2 flex flex-col items-center cursor-pointer text-gray-400 hover:bg-gray-700 rounded-lg">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
      </div>
      <div class="p-2 flex flex-col items-center cursor-pointer text-gray-400 hover:bg-gray-700 rounded-lg">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="m17 19-5-5-5 5"/><path d="m17 5-5 5-5-5"/></svg>
      </div>
    </div>
    <div class="mt-auto p-2 flex flex-col items-center cursor-pointer text-gray-400 hover:bg-gray-700 rounded-lg mb-4">
      <!-- Log Out Icon -->
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/></svg>
    </div>
  </div>

  <!-- Ana İçerik: Arama Filtresi ve Sonuçları -->
  <div class="flex-grow bg-white rounded-r-xl shadow-2xl flex relative overflow-hidden">
    
    <!-- Arka plan görseli (Görsellerdeki soyut deseni taklit ediyoruz) -->
    <div class="absolute inset-0 z-0 opacity-10 bg-no-repeat bg-cover bg-center" style="background-image: url('https://placehold.co/1200x800/262626/808080?text=Abstract+Background');"></div>
    
    <!-- 1. Arama Filtresi Bölümü -->
    <div class="w-80 p-6 bg-white bg-opacity-90 z-10 shadow-lg border-r border-gray-200">
      <h2 class="text-xl font-bold mb-6 text-gray-800">SEARCH FILTER</h2>
      <form class="space-y-4" (ngSubmit)="search()" #searchFormRef="ngForm">
        
        <!-- Customer ID -->
        <div>
          <label class="block text-sm font-medium text-gray-600">Customer ID</label>
          <input type="text" [(ngModel)]="searchForm.id" name="customerId" (ngModelChange)="checkAnyFieldFilled()"
                 [disabled]="isFieldDisabled"
                 class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-orange-500 focus:border-orange-500 disabled:bg-gray-100 disabled:text-gray-500">
        </div>
        
        <!-- NAT ID -->
        <div>
          <label class="block text-sm font-medium text-gray-600">NAT ID</label>
          <input type="text" [(ngModel)]="searchForm.nationalId" name="nationalId" (ngModelChange)="onNatIdChange()"
                 class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-orange-500 focus:border-orange-500">
        </div>
        
        <!-- Account Number -->
        <div>
          <label class="block text-sm font-medium text-gray-600">Account Number</label>
          <input type="text" [(ngModel)]="searchForm.customerNumber" name="customerNumber" (ngModelChange)="checkAnyFieldFilled()"
                 [disabled]="isFieldDisabled"
                 class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-orange-500 focus:border-orange-500 disabled:bg-gray-100 disabled:text-gray-500">
        </div>
        
        <!-- GSM Number -->
        <div>
          <label class="block text-sm font-medium text-gray-600">GSM Number</label>
          <input type="text" [(ngModel)]="searchForm.gsmNumber" name="gsmNumber" (ngModelChange)="checkAnyFieldFilled()"
                 [disabled]="isFieldDisabled"
                 class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-orange-500 focus:border-orange-500 disabled:bg-gray-100 disabled:text-gray-500">
        </div>
        
        
        
        <!-- First Name -->
        <div>
          <label class="block text-sm font-medium text-gray-600">First Name</label>
          <input type="text" [(ngModel)]="searchForm.firstName" name="firstName" (ngModelChange)="checkAnyFieldFilled()"
                 [disabled]="isFieldDisabled"
                 class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-orange-500 focus:border-orange-500 disabled:bg-gray-100 disabled:text-gray-500"
                 [ngClass]="{'border-red-500': searchFormRef.submitted && !searchForm.firstName && !isFieldDisabled && searchForm.lastName}"> 
        </div>
        
        <!-- Middle Name -->
        <div>
          <label class="block text-sm font-medium text-gray-600">Middle Name</label>
          <input type="text" [(ngModel)]="searchForm.middleName" name="middleName" (ngModelChange)="checkAnyFieldFilled()"
                 [disabled]="isFieldDisabled"
                 class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-orange-500 focus:border-orange-500 disabled:bg-gray-100 disabled:text-gray-500">
        </div>
        
        <!-- Last Name -->
        <div>
          <label class="block text-sm font-medium text-gray-600">Last Name</label>
          <input type="text" [(ngModel)]="searchForm.lastName" name="lastName" (ngModelChange)="checkAnyFieldFilled()"
                 [disabled]="isFieldDisabled"
                 class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-orange-500 focus:border-orange-500 disabled:bg-gray-100 disabled:text-gray-500">
        </div>

        <!-- Butonlar -->
        <div class="flex justify-between pt-6">
          <button type="button" (click)="clearSearch()"
                  class="px-6 py-2 text-sm font-semibold text-gray-700 bg-gray-300 rounded-lg hover:bg-gray-400 transition duration-150 shadow-md transform hover:scale-[1.02]">
            CLEAR
          </button>
          <button type="submit"
                  [disabled]="isLoading || !isAnyFieldFilled"
                  class="px-6 py-2 text-sm font-semibold text-white bg-orange-500 rounded-lg hover:bg-orange-600 transition duration-150 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02]">
            SEARCH
          </button>
        </div>
      </form>
    </div>

    <!-- 2. Arama Sonuçları Bölümü -->
    <div class="flex-grow p-6 z-10 relative">
      <h2 class="text-xl font-bold mb-4 text-gray-800">SEARCH RESULTS</h2>

      <!-- YÜKLEME DURUMU -->
      <div *ngIf="isLoading" class="absolute inset-0 flex items-center justify-center bg-white bg-opacity-80 z-20">
        <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-orange-500"></div>
      </div>

      <!-- BAŞLANGIÇ/BOŞ ARAMA DURUMU (image_17cea7.png) -->
      <div *ngIf="!searchResults && !isAnyFieldFilled" class="flex flex-col items-center justify-center h-full text-center">
        <p class="text-3xl text-gray-600 font-light mb-6">Would you like to create the customer?</p>
        <button (click)="goToCreateCustomer()"
                class="px-8 py-3 text-white text-lg font-semibold bg-orange-500 rounded-lg shadow-2xl hover:bg-orange-600 transition duration-300 flex items-center transform hover:scale-105">
          CREATE CUSTOMER
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 ml-3"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M19 8h6"/><path d="M22 5v6"/></svg>
        </button>
      </div>

      <!-- NO CUSTOMER FOUND DURUMU (image_17d2e5.png) -->
      <div *ngIf="searchResults && searchResults.length === 0" class="flex flex-col items-center justify-center h-full text-center">
        <p class="text-4xl text-red-600 font-serif font-bold italic mb-6">No customer found !</p>
        <p class="text-2xl text-gray-600 font-light mb-6">Would you like to create the customer?</p>
        <button (click)="goToCreateCustomer()"
                class="px-8 py-3 text-white text-lg font-semibold bg-orange-500 rounded-lg shadow-2xl hover:bg-orange-600 transition duration-300 flex items-center transform hover:scale-105">
          CREATE CUSTOMER
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 ml-3"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M19 8h6"/><path d="M22 5v6"/></svg>
        </button>
      </div>

      <!-- BAŞARILI SONUÇLAR TABLOSU -->
      <div *ngIf="searchResults && searchResults.length > 0" class="overflow-x-auto border border-gray-200 rounded-lg shadow-lg">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-100 sticky top-0">
            <tr>
              <th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Customer ID</th>
              <th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">NAT ID</th>
              <th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Account Number</th>
              <th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">GSM Number</th>
              <th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">First Name</th>
              <th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Middle Name</th>
              <th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Last Name</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-100">
            <tr *ngFor="let customer of searchResults; let i = index" class="hover:bg-orange-50 cursor-pointer transition duration-100">
              <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-orange-600 underline">{{ customer.id }}</td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-800">{{ customer.nationalId }}</td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-800">{{ customer.customerNumber}}</td>
<!--
              @for (cont of customer.contactMediums; track cont.contactMediumId) {
                @if(cont.primary==true){
               <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-800">{{ cont.value }}</td>
                }
              }-->
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-800">{{getGsmNumber(customer) }}</td>
              
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-800">{{ customer.firstName }}</td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-800">{{ customer.middleName }}</td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-800">{{ customer.lastName }}</td>
            </tr>
          </tbody>
        </table>
        <div class="p-3 text-sm text-gray-500 text-right bg-gray-50 border-t border-gray-200 rounded-b-lg">
          {{ searchResults.length }}/{{ searchResults.length }}
        </div>
      </div>
    </div>
  </div>
</div>

