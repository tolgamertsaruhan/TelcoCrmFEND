<div class="p-6 md:p-8">

  <div *ngIf="!isAdding && !isEditing" class="bg-white p-8 lg:p-10 rounded-2xl shadow-xl border border-gray-100/50">
    
    <div class="space-y-4">
      <div 
        *ngFor="let acc of accounts" 
        class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200 shadow-sm transition-all duration-300 hover:shadow-md hover:border-orange-200"
      >
        <div class="flex-1">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <span class="text-xs text-gray-500 uppercase tracking-wide">Type</span>
              <p class="text-gray-800 font-semibold mt-1">{{ acc.type }}</p>
            </div>
            <div>
              <span class="text-xs text-gray-500 uppercase tracking-wide">Status</span>
              <p class="text-gray-800 font-semibold mt-1">{{ acc.status }}</p>
            </div>
            <div>
              <span class="text-xs text-gray-500 uppercase tracking-wide">Account Name</span>
              <p class="text-gray-800 font-semibold mt-1">{{ acc.accountName }}</p>
            </div>
            <div>
              <span class="text-xs text-gray-500 uppercase tracking-wide">Account Number</span>
              <p class="text-gray-800 font-semibold mt-1">{{ acc.accountNumber || '-' }}</p>
            </div>
          </div>
        </div>

        <div class="flex space-x-2 ml-6">
          <button 
            (click)="startEdit(acc)" 
            class="text-gray-600 hover:text-orange-500 p-2 rounded-full hover:bg-gray-100 transition duration-150"
            title="Edit Account"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
            </svg>
          </button>
          <button 
            (click)="confirmDelete(acc.id)" 
            class="text-gray-600 hover:text-red-500 p-2 rounded-full hover:bg-gray-100 transition duration-150"
            title="Delete Account"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
          </button>
        </div>
      </div>

      <div *ngIf="accounts.length === 0" class="text-center p-10 text-gray-500">
        No billing accounts found for this customer. Please add a new one.
      </div>
    </div>

    <div class="mt-6 pt-4 border-t border-gray-100">
      <button 
        (click)="startAdd()" 
        class="flex items-center space-x-2 text-white bg-orange-600 hover:bg-orange-700 px-5 py-2 rounded-lg shadow-md transition-all duration-200 font-semibold transform hover:-translate-y-0.5"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
        </svg>
        <span>ADD NEW BILLING ACCOUNT</span>
      </button>
    </div>

  </div>

  <div *ngIf="isAdding || isEditing" class="bg-white/90 backdrop-blur-sm p-8 lg:p-10 rounded-2xl shadow-2xl border border-gray-100/50">
    <h2 class="text-2xl font-semibold text-gray-800 mb-6">
      {{ isAdding ? 'Add New Billing Account' : 'Edit Billing Account' }}
    </h2>

    <form [formGroup]="accountForm" class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6">

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Type <span class="text-red-500">*</span></label>
        <select 
          formControlName="type" 
          class="mt-1 block w-full rounded-xl border p-3.5 transition duration-200 focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500 shadow-md bg-gray-50/70"
        >
          <option [ngValue]="''" disabled>Select Type</option>
          <option *ngFor="let t of types" [value]="t">{{ t }}</option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Status <span class="text-red-500">*</span></label>
        <select 
          formControlName="status" 
          class="mt-1 block w-full rounded-xl border p-3.5 transition duration-200 focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500 shadow-md bg-gray-50/70"
        >
          <option [ngValue]="''" disabled>Select Status</option>
          <option *ngFor="let s of statuses" [value]="s">{{ s }}</option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Account Name <span class="text-red-500">*</span></label>
        <input 
          formControlName="accountName" 
          type="text" 
          class="mt-1 block w-full rounded-xl border p-3.5 transition duration-200 focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500 shadow-md bg-gray-50/70"
          placeholder="Enter account name"
        />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Account Number <span class="text-red-500">*</span></label>
        <input 
          formControlName="accountNumber" 
          type="text" 
          class="mt-1 block w-full rounded-xl border p-3.5 transition duration-200 focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500 shadow-md bg-gray-50/70"
          placeholder="Enter account number"
        />
      </div>

      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-1">Address ID</label>
        <input 
          formControlName="addressId" 
          type="text" 
          class="mt-1 block w-full rounded-xl border p-3.5 transition duration-200 focus:outline-none focus:ring-1 focus:ring-orange-500 focus:border-orange-500 shadow-md bg-gray-50/70"
          placeholder="Enter address ID (optional - default address will be used if empty)"
        />
        <p class="text-xs text-gray-500 mt-2">
          If left empty, the default address will be used automatically.
        </p>
      </div>

    </form>

    <div class="mt-10 flex justify-end space-x-4 border-t border-gray-100/50 pt-6">
      <button 
        (click)="cancel()" 
        type="button"
        class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg shadow-md hover:bg-gray-400 font-medium transition duration-150 transform hover:-translate-y-0.5"
      >
        Cancel
      </button>
      <button 
        (click)="save()" 
        type="submit"
        [disabled]="!accountForm.valid"
        class="text-white px-6 py-3 rounded-lg shadow-xl font-semibold transition duration-150 transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed"
        [ngClass]="isAdding ? 'bg-green-600 hover:bg-green-700 focus:ring-green-500' : 'bg-orange-600 hover:bg-orange-700 focus:ring-orange-500'"
      >
        {{ isAdding ? 'CREATE ACCOUNT' : 'UPDATE ACCOUNT' }}
      </button>
    </div>

  </div>
</div>